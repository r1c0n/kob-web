[target.aarch64-unknown-linux-gnu]
pre-build = [
    "apt-get update",
    "apt-get install -y curl build-essential gcc-aarch64-linux-gnu",
    "curl -LO https://www.lua.org/ftp/lua-5.4.7.tar.gz",
    "tar -xzf lua-5.4.7.tar.gz",
    "cd lua-5.4.7 && make CC=aarch64-linux-gnu-gcc AR='aarch64-linux-gnu-ar rcu' RANLIB=aarch64-linux-gnu-ranlib PLAT=linux",
    "mkdir -p /usr/aarch64-linux-gnu/lib /usr/aarch64-linux-gnu/include",
    "cp lua-5.4.7/src/liblua.a /usr/aarch64-linux-gnu/lib/liblua5.4.a",
    "cp lua-5.4.7/src/lua.h lua-5.4.7/src/luaconf.h lua-5.4.7/src/lualib.h lua-5.4.7/src/lauxlib.h /usr/aarch64-linux-gnu/include/",
    "mkdir -p /usr/lib/aarch64-linux-gnu/pkgconfig",
    "printf 'prefix=/usr/aarch64-linux-gnu\\nlibdir=/usr/aarch64-linux-gnu/lib\\nincludedir=/usr/aarch64-linux-gnu/include\\n\\nName: Lua\\nDescription: Lua 5.4\\nVersion: 5.4\\nLibs: -L${libdir} -llua5.4\\nCflags: -I${includedir}\\n' > /usr/lib/aarch64-linux-gnu/pkgconfig/lua54.pc"
]

[target.aarch64-unknown-linux-gnu.env]
passthrough = ["LUA_STATIC", "RUSTFLAGS"]
